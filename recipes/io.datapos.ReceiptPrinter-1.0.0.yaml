---
RecipeFormatVersion: '2020-01-25'
ComponentName: io.datapos.ReceiptPrinter
ComponentVersion: '1.0.0'
ComponentDescription: |
  Polls io.datapos.ReceiptPrinterHTTPInterface for print jobs, then formats and prints them.
ComponentPublisher: DataPOS
ComponentConfiguration:
  DefaultConfiguration:
    printer: EPSON_TM-T82III
    # Note that the username is called the "destination" in the DB for printos-serverless-service
    # and must match the IoT Thing name (i.e. the name of this device in AWS IoT). PrintOS.jar
    # needs the username and password so it can report the statuses of the print jobs to
    # printos-serverless-service (via the io.datapos.ReceiptPrinterHTTPInterface component).
    destinationUsername: '{configuration:/system/thingName}'
    destinationPassword: blueberry
Manifests:
- Platform:
    os: linux
  Lifecycle:
    Setenv:
      ARTIFACTS_PATH: '{artifacts:path}'
      RECEIPT_PRINTER: '{configuration:/printer}'
      DESTINATION_USERNAME: '{configuration:/destinationUsername}'
      DESTINATION_PASSWORD: '{configuration:/destinationPassword}'
    Run: '{artifacts:path}/run.sh'
